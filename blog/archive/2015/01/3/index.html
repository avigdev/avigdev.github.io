

<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Avi Gozolchiani אבי גוזולצני</title>
  <meta name="description" content="Environmental Physics at Ben Gurion University">
  <meta name="author" content="Avi Gozolchiani">

  <link rel="alternate" type="application/rss+xml" title="RSS 2.0"
        href="/blog/feed/">
  <link rel="alternate" type="application/atom+xml" title="Atom 1.0"
        href="/blog/feed/atom/">

  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="apple-touch-icon"
        href="/img/apple-touch-icon.png">

  <link rel="stylesheet" href="/css/base.css?v=1">
  <link rel="stylesheet" href="/css/grid.css?v=1">
  <link rel="stylesheet" media="handheld"
        href="/css/handheld.css?v=1">
  <link rel="stylesheet"
        href="/css/pygments_murphy.css">

  <script
    src="/js/libs/modernizr-1.7.min.js">
  </script>

  <link rel="stylesheet" href="/themes/theme1/style.css?v=1">
<link href='http://fonts.googleapis.com/css?family=Architects+Daughter'  rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Droid+Sans' rel='stylesheet' type='text/css'>


</head>
  <body>
    <div id="container" class="container container_12">
      <div id="main" role="main">
        <div id="main_block">
          <header>
  <div id="header" class="header_gradient theme_font">
    <h1>
      <a href="/">
        Avi Gozolchiani אבי גוזולצני
      </a>
    </h1>
    <h2>Environmental Physics at Ben Gurion University</h2>
  </div>
  <div id="navigation" class="grid_12">
    
    
    <ul class="theme_font">
      <li>
        
        <a href="/" class="">Home</a>
      </li>
      <li>
        
        <a href="/publications" class="">Publications</a>
      </li>
      <li>
        
        <a href="/blog" class="">Blog</a>
      </li>
      <li>
        
        <a href="/blog/archive/" class="">Archives</a>
      </li>
      <li>
        
        <a href="/contact.html" class="">Contact</a>
      </li>
      <li>
        <a href="http://sourceforge.net/u/avigdev/profile/" class="">Software</a>
      </li>
      <li>
        
        <a href="/categories.html" class="">Categories</a>
      </li>
    </ul>
  </div>
</header>

          <div id="prose_block" class="grid_8">
            
  



<article>
  <div class="blog_post">
    <header>
      <div id="create-a-document-from-your-figures"></div>
      <h2 class="blog_post_title"><a href="/blog/20150107/2015-1-7-create-a-document-from-your-figures-html/" rel="bookmark" title="Permanent Link to create a document from your figures">create a document from your figures</a></h2>
      <p><small><span class="blog_post_date">January 07, 2015 at 08:42 PM</span> | categories: 
        <span class="blog_post_categories"><a href='/blog/category/latex/'>latex</a>, <a href='/blog/category/workflow/'>workflow</a></span>
        | <a href="http://avigdev.github.io/blog/20150107/2015-1-7-create-a-document-from-your-figures-html#disqus_thread">View Comments</a>
      </small></p>
    </header>
    <div class="post_prose">
      




<p>
A part of the scientific workflow is creating images and categorizing them into directories. In our little parties, we scientist show these images to each other and brag about our ability to create more. It is therefore very useful to have bundles of these in pdf or html files (depending on the kind of party).
</p>

<p>
Here's how to create a pdf (using LaTeX) :
</p>

<div class="org-src-container">

<pre class="src src-perl"><span class="linenr">1: </span><span style="color: #b22222;">#</span><span style="color: #b22222;">!/usr/bin/perl -nw </span>
<span class="linenr">2: </span><span style="color: #b22222;">## </span><span style="color: #b22222;">syntax : ls fig_patterns | latexfigs.pl &gt; latexfile</span>
<span class="linenr">3: </span>chomp();
<span class="linenr">4: </span>print <span style="color: #8b2252;">"\\begin\{figure\}\n\\centering\n\\includegraphics\[scale=1.2,angle=0\]\{$_\}\n"</span>;
<span class="linenr">5: </span>s<span style="color: #8b2252;">/_/\\_/</span>g;
<span class="linenr">6: </span>print <span style="color: #8b2252;">"\\caption\{$_\}\n\\end\{figure\}\n\\clearpage\n"</span>;
</pre>
</div>

<p>
and Here's how to create a html : 
</p>

<div class="org-src-container">

<pre class="src src-perl"><span class="linenr">1: </span><span style="color: #b22222;">#</span><span style="color: #b22222;">!/usr/bin/perl -nw </span>
<span class="linenr">2: </span><span style="color: #b22222;">## </span><span style="color: #b22222;">syntax : ls fig_patterns | htmlfigs.pl &gt; htmlfile</span>
<span class="linenr">3: </span>chomp();
<span class="linenr">4: </span>print <span style="color: #8b2252;">"&lt;IMG src=\"$_\" width=650&gt;&lt;BR&gt;\n"</span>;
<span class="linenr">5: </span>print <span style="color: #8b2252;">"$_&lt;BR&gt;&lt;BR&gt;\n"</span>;
</pre>
</div>

<p>
After some time, you may want to make a section in your book/paper from each directory.
</p>

<p>
here's the LaTeX version : 
</p>
<div class="org-src-container">

<pre class="src src-perl"><span class="linenr">1: </span><span style="color: #b22222;">#</span><span style="color: #b22222;">!/usr/bin/perl -w </span>
<span class="linenr">2: </span><span style="color: #b22222;">## </span><span style="color: #b22222;">syntax : anchor_latex.pl "tag" "text" &gt;&gt; file.latex</span>
<span class="linenr">3: </span>$<span style="color: #a0522d;">tag</span>=shift or <span style="color: #932092;">die</span> <span style="color: #8b2252;">"syntax error: anchor_latex.pl \"tag\" \"text\"&gt;&gt;file.latex\n"</span>;
<span class="linenr">4: </span>$<span style="color: #a0522d;">text</span>=shift or <span style="color: #932092;">die</span> <span style="color: #8b2252;">"syntax error: anchor_latex.pl \"tag\" \"text\"&gt;&gt;file.latex\n"</span>;
<span class="linenr">5: </span>print <span style="color: #8b2252;">"\\section{$text}\\label{sec:$tag}\n"</span>;
</pre>
</div>

<p>
and here's the html :
</p>
<div class="org-src-container">

<pre class="src src-perl"><span class="linenr">1: </span><span style="color: #b22222;">#</span><span style="color: #b22222;">!/usr/bin/perl -w </span>
<span class="linenr">2: </span><span style="color: #b22222;">## </span><span style="color: #b22222;">syntax : anchor_html.pl "tag" "text" &gt;&gt; file.html</span>
<span class="linenr">3: </span>$<span style="color: #a0522d;">tag</span>=shift or <span style="color: #932092;">die</span> <span style="color: #8b2252;">"syntax error: anchor_html.pl \"tag\" \"text\"&gt;&gt;file.html\n"</span>;
<span class="linenr">4: </span>$<span style="color: #a0522d;">text</span>=shift or <span style="color: #932092;">die</span> <span style="color: #8b2252;">"syntax error: anchor_html.pl \"tag\" \"text\"&gt;&gt;file.html\n"</span>;
<span class="linenr">5: </span>print <span style="color: #8b2252;">"&lt;a id=\"$tag\"&gt;&lt;h2&gt;$text&lt;/h2&gt;&lt;/a&gt;\n"</span>;
</pre>
</div>

<p>
you can include a template for a latexfile in your home directory : 
</p>
<div class="org-src-container">

<pre class="src src-latex"><span class="linenr"> 1: </span><span style="color: #932092;">\documentclass</span>[A4paper]{<span style="color: #483d8b;">article</span>}
<span class="linenr"> 2: </span><span style="color: #932092;">\usepackage</span>{<span style="color: #483d8b;">graphicx</span>}
<span class="linenr"> 3: </span><span style="color: #932092;">\usepackage</span>{<span style="color: #483d8b;">cite</span>}
<span class="linenr"> 4: </span><span style="color: #932092;">\usepackage</span>{<span style="color: #483d8b;">placeins</span>} <span style="color: #b22222;">% floatbarrier definition</span>
<span class="linenr"> 5: </span><span style="color: #932092;">\usepackage</span>[caption=false]{<span style="color: #483d8b;">subfig</span>}
<span class="linenr"> 6: </span><span style="color: #932092;">\usepackage</span>{<span style="color: #483d8b;">fullpage</span>}
<span class="linenr"> 7: </span><span style="color: #932092;">\newcommand</span>{<span style="color: #0000ff;">\unit</span>}[1]{<span style="color: #932092;">\ensuremath</span>{<span style="color: #932092;">\,</span> <span style="color: #932092;">\mathrm</span>{#1}}}
<span class="linenr"> 8: </span><span style="color: #932092;">\begin</span>{<span style="color: #0000ff;">document</span>}
<span class="linenr"> 9: </span>TEXT
<span class="linenr">10: </span><span style="color: #932092;">\end</span>{<span style="color: #0000ff;">document</span>}
</pre>
</div>

<p>
and substitute your created latex code into the <b>TEXT</b> part, using perl again : 
</p>
<div class="org-src-container">

<pre class="src src-perl"><span class="linenr"> 1: </span><span style="color: #b22222;">#</span><span style="color: #b22222;">!/usr/bin/perl -w </span>
<span class="linenr"> 2: </span><span style="color: #b22222;"># </span><span style="color: #b22222;">syntax : merge_latex_tmpl.pl tmpfile &gt; merged_file.tex</span>
<span class="linenr"> 3: </span>$<span style="color: #a0522d;">tmplfilename</span>=$<span style="color: #a0522d;">ENV</span>{<span style="color: #8b2252;">'LATEXTMPL'</span>};
<span class="linenr"> 4: </span>$<span style="color: #a0522d;">filename</span>=shift // <span style="color: #932092;">die</span> <span style="color: #8b2252;">"syntax error"</span>;
<span class="linenr"> 5: </span>open TMPL,<span style="color: #8b2252;">"&lt;$tmplfilename"</span> // <span style="color: #932092;">die</span> <span style="color: #8b2252;">"could not find the template file"</span>;
<span class="linenr"> 6: </span>open FILE,<span style="color: #8b2252;">"&lt;$filename"</span> // <span style="color: #932092;">die</span> <span style="color: #8b2252;">"could not find the file $filename"</span>;
<span class="linenr"> 7: </span>$<span style="color: #a0522d;">uniq_content</span> = join(<span style="color: #8b2252;">""</span>, &lt;<span style="color: #008b8b;">FILE</span>&gt;); 
<span class="linenr"> 8: </span><span style="color: #932092;">while</span>(&lt;<span style="color: #008b8b;">TMPL</span>&gt;){
<span class="linenr"> 9: </span>    <span style="color: #932092;">if</span>(<span style="color: #8b2252;">/TEXT/</span>){
<span class="linenr">10: </span>        print $<span style="color: #a0522d;">uniq_content</span>;
<span class="linenr">11: </span>    }<span style="color: #932092;">else</span>{
<span class="linenr">12: </span>        print;
<span class="linenr">13: </span>    }
<span class="linenr">14: </span>}
</pre>
</div>

<p>
where <i>LATEXTMPL</i> is an environment variable, telling your script the location of your template. I like templates, and I clutter quite a bit as hidden files in my home directory. Do you do it differently ? 
</p>
<p>Copyright (C) 2015 by Avi Gozolchiani. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2015/1/7/create-a-document-from-your-figures.org">org-mode source</a><p>

    </div>
  </div>
</article>



  <div class="after_post"><a href="http://avigdev.github.io/blog/20150107/2015-1-7-create-a-document-from-your-figures-html#disqus_thread">Read and Post Comments</a></div>
  <hr class="interblog" />
 <a href="../2">« Previous Page</a>

          </div>
          <div id="sidebar" class="grid_4">
            <aside>
  <section>
    <h1 class="post_header_gradient theme_font">Twitter</h1>
<div class="sidebar_item">
<a class="twitter-timeline" href="https://twitter.com/avigdev" data-widget-id="549128905232109568">Tweets by @avigdev</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div>
<br />
    <!-- <div id="on_twitter"> -->
    <!--   <div id="tweets"></div> -->
    <!--   <a href="http://search.twitter.com/search?q=example" style="float: right">See more tweets</a> -->
    <!-- </div> -->
  </section>
  <section>
    <h1 class="post_header_gradient theme_font">Latest Posts</h1>
    <ul>
      <li><a href="/blog/20150207/2015-02-07-regridding-unequally-spaced-sampled-field-and-plotting-an-imagesc-html/">Regridding unequally spaced sampled field, and plotting an imagesc</a></li>
      <li><a href="/blog/20150129/2015-01-29-screen-unique-logs-for-each-run-html/">Screen - unique logs for each run</a></li>
      <li><a href="/blog/20150127/2015-01-27-consistent-latex-units-in-non-italics-html/">Consistent Latex units in non italics</a></li>
      <li><a href="/blog/20150127/2015-01-27-xmgr-annotations-html/">Xmgr annotations</a></li>
      <li><a href="/blog/20150125/2015-01-25-the-best-of-all-worlds-disp-+-sprintf-html/">The best of all worlds - disp + sprintf</a></li>
    </ul>
  </section>
  <section>
    <h1 class="post_header_gradient theme_font">Latest sourceforge repos</h1>
    <div id="sourceforge">
    <aside>

      <a href="http://sourceforge.net/u/avigdev/profile/" style="float: right">@avigdev</a> on sourceforge : 
    <lr>
    </lr> 
</aside>
    
    </div>
  </section>
</aside>


          </div>
          <div class="clear"></div>
        </div>
      </div>
      
<footer>
  <div id="footer" class="grid_12">
    <div class="grid_8">
      <p>
        <a href="/blog/feed/index.xml">RSS</a>
        <a href="http://avigdev.disqus.com/latest.rss">Comments RSS Feed</a>.
      </p>
    </div>
    <div class="grid_4" id="credits">
      <p>
        Copyright 2015
        Avi Gozolchiani
      </p>
      <p>
        Powered by <a href="http://www.blogofile.com">Blogofile</a>
      </p>
    </div>
  </div>
</footer>

    </div>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/js/libs/jquery-1.5.1.min.js"%3E%3C/script%3E'))</script>
  <script src="/js/plugins.js"></script>
  <script src="/js/script.js"></script>
  <script src="/js/jquery.tweet.js"></script>  
  <script src="/js/site.js"></script>
  <!--[if lt IE 7 ]>
  <script src="js/libs/dd_belatedpng.js"></script>
  <script> DD_belatedPNG.fix('img, .png_bg');</script>
  <![endif]-->
  <script>
      var _gaq=[['_setAccount','UA-58132730-1'],['_trackPageview']];
      (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
      g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
      s.parentNode.insertBefore(g,s)}(document,'script'));
  </script>
  <script>
  (function() {
      var links = document.getElementsByTagName('a');
      var query = '?';
      for(var i = 0; i < links.length; i++) {
          if(links[i].href.indexOf('#disqus_thread') >= 0) {
              query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
          }
      }
      document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/avigdev/get_num_replies.js' + query + '"></' + 'script>');
  })();
  </script>

  </body>
</html>






